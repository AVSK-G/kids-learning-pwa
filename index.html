<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>KG ‡§ü‡•Ä‡§ö‡§∞</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#5bbcff">

<style>
*{box-sizing:border-box;font-family:"Noto Sans Devanagari",Arial}
html,body{
 margin:0;
 width:100%;
 height:100%;
 background:#fff;
 overflow:hidden;
 touch-action:none;
}

/* INFO */
#planInfo{
 position:fixed;top:6px;left:6px;
 background:#000;color:#fff;
 padding:4px 8px;font-size:12px;
 border-radius:6px;z-index:999
}

/* LICENSE */
#licenseScreen{
 position:fixed;inset:0;
 background:#fff;
 display:flex;flex-direction:column;
 justify-content:center;align-items:center;
 z-index:1000;text-align:center;padding:20px
}
#licenseScreen input{padding:10px;font-size:16px;margin-top:10px;width:220px}
#licenseScreen button{margin-top:10px;padding:10px 18px;font-size:16px}
#challengeBox{white-space:pre-line;font-weight:bold;margin-top:10px}

/* GAME */
#game{
 display:none;
 width:100vw;
 height:100vh;
 flex-direction:column;
}

/* MODES */
#modes{
 position:fixed;top:6px;right:6px;
 display:flex;flex-wrap:wrap;gap:6px;z-index:10
}
#modes button{
 padding:6px 10px;border:none;border-radius:8px;
 background:#4caf50;color:#fff;font-size:13px
}

/* TOP */
#top{
 flex:1;
 display:flex;
 flex-direction:column;
 align-items:center;
 justify-content:flex-start;
}
#instruction{
 display:none;
}

.object{
 font-size:180px;
 margin-top: 38px;
 animation:float 2s ease-in-out infinite alternate;
}
@keyframes float{
 from{transform:translateY(0)}
 to{transform:translateY(-14px)}
}

#objectName{
 font-size:26px;
 font-weight:900;
 margin-top:6px
}

/* NUMBER DISPLAY */
.numBig{
 min-width:220px;
 padding:0px;
 border-radius:20px;
 background:#5bbcff;
 color:#fff;
 font-size:170px;
 font-weight:900;
 display:flex;
 align-items:center;
 justify-content:center;
 margin-top:60px;
 animation:numFloat 1.8s ease-in-out infinite alternate;
}
@keyframes numFloat{
 from{transform:translateY(0) scale(1)}
 to{transform:translateY(-16px) scale(1.08)}
}

/* BASKET */
#basket{
 position: fixed;
 bottom: 60px;          /* ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ï‡•á ‡§®‡•Ä‡§ö‡•á ‡§∏‡•á ‡§¶‡•Ç‡§∞‡•Ä */
 left: 50%;
 transform: translateX(-50%);
 font-size: 280px;      /* ‡§ü‡•ã‡§ï‡§∞‡•Ä ‡§ï‡§æ ‡§∏‡§æ‡§á‡§ú‡§º */
 z-index: 5;
 pointer-events: none;
}

/* OPTIONS */
#letters{
 display:flex;
 justify-content:space-evenly;
 align-items:center;
 padding-bottom:8px;
 margin-bottom:30px;   /* ‚úî ‡§Ö‡§¨ cards ‡§ä‡§™‡§∞ ‡§Ü‡§è‡§Å‡§ó‡•á */
}
.card{
 width:90px;
 height:90px;
 border-radius:20px;
 background:#ffd54f;
 display:flex;
 align-items:center;
 justify-content:center;
 font-size:48px;
 font-weight:900;
 box-shadow:0 6px 12px rgba(0,0,0,.3);
 position:relative;
 z-index:20;  
}
.numCard{background:hsl(var(--h),80%,70%)}
/* PLAN CARD */
.planCard{
 margin:16px 0;
 padding:14px 18px;
 border-radius:18px;
 background:linear-gradient(135deg,#673ab7,#3f51b5);
 color:#fff;
 width:100%;
 max-width:320px;
 box-shadow:0 10px 25px rgba(0,0,0,.25);
}

.planTitle{
 font-size:18px;
 font-weight:700;
}

.planPrice{
 font-size:28px;
 font-weight:900;
 margin:6px 0;
}

.planPrice span{
 font-size:14px;
 font-weight:400;
 opacity:.9;
}

.planNote{
 font-size:13px;
 line-height:1.4;
 opacity:.95;
}
/* CONTACT BUTTONS */
.contactBox{
 margin-top:14px;
 padding:14px;
 border-radius:18px;
 background:#e8f5e9;
 width:100%;
 max-width:320px;
 box-shadow:0 8px 18px rgba(0,0,0,.2);
 text-align:center;
}

.contactTitle{
 font-size:15px;
 font-weight:700;
 margin-bottom:10px;
 color:#1b5e20;
}

.contactBtns{
 display:flex;
 gap:10px;
 justify-content:center;
}

.contactBtns a{
 flex:1;
 padding:10px 0;
 border-radius:14px;
 font-size:14px;
 font-weight:900;
 text-decoration:none;
 color:#fff;
}

.callBtn{background:#2196f3;}
.waBtn{background:#25d366;}
</style>
</head>

<body>

<div id="planInfo"></div>

<!-- LICENSE SCREEN -->
<div id="licenseScreen">
  <h3>Trial ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§π‡•ã ‡§ó‡§Ø‡§æ</h3>

  <div id="challengeBox"></div>

  <!-- PLAN CARD -->
  <div class="planCard">
    <div class="planTitle">Premium Plan</div>
    <div class="planPrice">‚Çπ100 <span>/ 1 Year</span></div>
    <div class="planNote">
      ‚úî ‡§∏‡§≠‡•Ä ‡§ó‡•á‡§Æ ‡§Ö‡§®‡§≤‡•â‡§ï<br>
      ‚úî ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§®‡§π‡•Ä‡§Ç<br>
      ‚úî ‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§
    </div>
  </div>
<!-- CONTACT BUTTONS -->
<div class="contactBox">

  <div class="contactTitle">
    Activation Code ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç
  </div>

  <div class="contactBtns">

    <!-- CALL BUTTON -->
    <a class="callBtn" href="tel:6393998216">
      üìû Call ‡§ï‡§∞‡•á‡§Ç
    </a>

    <!-- WHATSAPP BUTTON -->
    <a class="waBtn"
       href="https://wa.me/916393998216?text=Hello%20KG%20Teacher,%20mujhe%20activation%20code%20chahiye"
       target="_blank">
       üí¨ WhatsApp ‡§ï‡§∞‡•á‡§Ç
    </a>

  </div>
</div>
  <input id="licenseInput" placeholder="Activation Code">
  <button onclick="activate()">Activate</button>
  <div id="msg"></div>
</div>
 
<!-- GAME -->
<div id="game">
 <div id="modes">
  <button onclick="setMode('hindi')">‡§ï‚Äì‡§ú‡•ç‡§û</button>
  <button onclick="setMode('swar')">‡§Ö‚Äì‡§É</button>
  <button onclick="setMode('matra')">‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ‡§è‡§Å</button>
  <button onclick="setMode('eng')">A‚ÄìZ</button>
  <button onclick="setMode('num')">1‚Äì100</button>
 </div>

 <div id="top">
  <div id="instruction"></div>
  <div id="objectBox"></div>
  <div id="objectName"></div>
  <div id="basket">üèòÔ∏è</div>
 </div>

 <div id="letters"></div>
</div>

<script>
/* SPEAK */
function speak(t){
 speechSynthesis.cancel();
 const u=new SpeechSynthesisUtterance(t);
 u.lang="hi-IN";u.rate=.9;
 speechSynthesis.speak(u);
}

const matraVoice={"‡§æ":"‡§Ü","‡§ø":"‡§á","‡•Ä":"‡§à","‡•Å":"‡§â","‡•Ç":"‡§ä","‡•á":"‡§è","‡•à":"‡§ê","‡•ã":"‡§ì","‡•å":"‡§î","‡§Ç":"‡§Ö‡§Ç","‡§É":"‡§Ö‡§É"};

const hindiNums=["","‡§è‡§ï","‡§¶‡•ã","‡§§‡•Ä‡§®","‡§ö‡§æ‡§∞","‡§™‡§æ‡§Å‡§ö","‡§õ‡§π","‡§∏‡§æ‡§§","‡§Ü‡§†","‡§®‡•å","‡§¶‡§∏",
"‡§ó‡•ç‡§Ø‡§æ‡§∞‡§π","‡§¨‡§æ‡§∞‡§π","‡§§‡•á‡§∞‡§π","‡§ö‡•å‡§¶‡§π","‡§™‡§Ç‡§¶‡•ç‡§∞‡§π","‡§∏‡•ã‡§≤‡§π","‡§∏‡§§‡•ç‡§∞‡§π","‡§Ö‡§†‡§æ‡§∞‡§π","‡§â‡§®‡•ç‡§®‡•Ä‡§∏","‡§¨‡•Ä‡§∏",
"‡§á‡§ï‡•ç‡§ï‡•Ä‡§∏","‡§¨‡§æ‡§à‡§∏","‡§§‡•á‡§à‡§∏","‡§ö‡•å‡§¨‡•Ä‡§∏","‡§™‡§ö‡•ç‡§ö‡•Ä‡§∏","‡§õ‡§¨‡•ç‡§¨‡•Ä‡§∏","‡§∏‡§§‡•ç‡§§‡§æ‡§à‡§∏","‡§Ö‡§ü‡•ç‡§†‡§æ‡§à‡§∏","‡§â‡§®‡§§‡•Ä‡§∏","‡§§‡•Ä‡§∏",
"‡§á‡§ï‡§§‡•Ä‡§∏","‡§¨‡§§‡•ç‡§§‡•Ä‡§∏","‡§§‡•à‡§Ç‡§§‡•Ä‡§∏","‡§ö‡•å‡§Ç‡§§‡•Ä‡§∏","‡§™‡•à‡§Ç‡§§‡•Ä‡§∏","‡§õ‡§§‡•ç‡§§‡•Ä‡§∏","‡§∏‡•à‡§Ç‡§§‡•Ä‡§∏","‡§Ö‡§°‡§º‡§§‡•Ä‡§∏","‡§â‡§®‡§§‡§æ‡§≤‡•Ä‡§∏","‡§ö‡§æ‡§≤‡•Ä‡§∏",
"‡§á‡§ï‡§§‡§æ‡§≤‡•Ä‡§∏","‡§¨‡§Ø‡§æ‡§≤‡•Ä‡§∏","‡§§‡•à‡§Ç‡§§‡§æ‡§≤‡•Ä‡§∏","‡§ö‡§µ‡§æ‡§≤‡•Ä‡§∏","‡§™‡•à‡§Ç‡§§‡§æ‡§≤‡•Ä‡§∏","‡§õ‡§ø‡§Ø‡§æ‡§≤‡•Ä‡§∏","‡§∏‡•à‡§Ç‡§§‡§æ‡§≤‡•Ä‡§∏","‡§Ö‡§°‡§º‡§§‡§æ‡§≤‡•Ä‡§∏","‡§â‡§®‡§ö‡§æ‡§∏","‡§™‡§ö‡§æ‡§∏",
"‡§á‡§ï‡•ç‡§Ø‡§æ‡§µ‡§®","‡§¨‡§æ‡§µ‡§®","‡§§‡§ø‡§∞‡§™‡§®","‡§ö‡•å‡§µ‡§®","‡§™‡§ö‡§™‡§®","‡§õ‡§™‡•ç‡§™‡§®","‡§∏‡§§‡•ç‡§§‡§æ‡§µ‡§®","‡§Ö‡§ü‡•ç‡§†‡§æ‡§µ‡§®","‡§â‡§®‡§∏‡§†","‡§∏‡§æ‡§†",
"‡§á‡§ï‡§∏‡§†","‡§¨‡§æ‡§∏‡§†","‡§§‡§ø‡§∞‡§∏‡§†","‡§ö‡•å‡§Ç‡§∏‡§†","‡§™‡•à‡§Ç‡§∏‡§†","‡§õ‡§ø‡§Ø‡§æ‡§∏‡§†","‡§∏‡§°‡§º‡§∏‡§†","‡§Ö‡§°‡§º‡§∏‡§†","‡§â‡§®‡§π‡§§‡•ç‡§§‡§∞","‡§∏‡§§‡•ç‡§§‡§∞",
"‡§á‡§ï‡§π‡§§‡•ç‡§§‡§∞","‡§¨‡§π‡§§‡•ç‡§§‡§∞","‡§§‡§ø‡§π‡§§‡•ç‡§§‡§∞","‡§ö‡•å‡§π‡§§‡•ç‡§§‡§∞","‡§™‡§ö‡§π‡§§‡•ç‡§§‡§∞","‡§õ‡§ø‡§π‡§§‡•ç‡§§‡§∞","‡§∏‡§§‡§π‡§§‡•ç‡§§‡§∞","‡§Ö‡§†‡§π‡§§‡•ç‡§§‡§∞","‡§â‡§®‡§æ‡§∏‡•Ä","‡§Ö‡§∏‡•ç‡§∏‡•Ä",
"‡§á‡§ï‡•ç‡§Ø‡§æ‡§∏‡•Ä","‡§¨‡§Ø‡§æ‡§∏‡•Ä","‡§§‡§ø‡§∞‡§æ‡§∏‡•Ä","‡§ö‡•å‡§∞‡§æ‡§∏‡•Ä","‡§™‡§ö‡§æ‡§∏‡•Ä","‡§õ‡§ø‡§Ø‡§æ‡§∏‡•Ä","‡§∏‡§§‡•ç‡§§‡§æ‡§∏‡•Ä","‡§Ö‡§†‡§æ‡§∏‡•Ä","‡§®‡§µ‡§æ‡§∏‡•Ä","‡§®‡§¨‡•ç‡§¨‡•á",
"‡§á‡§ï‡•ç‡§Ø‡§æ‡§®‡§µ‡•á","‡§¨‡§æ‡§®‡§µ‡•á","‡§§‡§ø‡§∞‡§æ‡§®‡§µ‡•á","‡§ö‡•å‡§∞‡§æ‡§®‡§µ‡•á","‡§™‡§ö‡§æ‡§®‡§µ‡•á","‡§õ‡§ø‡§Ø‡§æ‡§®‡§µ‡•á","‡§∏‡§§‡•ç‡§§‡§æ‡§®‡§µ‡•á","‡§Ö‡§ü‡•ç‡§†‡§æ‡§®‡§µ‡•á","‡§®‡§ø‡§®‡•ç‡§Ø‡§æ‡§®‡§µ‡•á","‡§∏‡•å"];

const data={
 hindi:[["‡§ï","‡§ï‡§¨‡•Ç‡§§‡§∞","üïäÔ∏è"],["‡§ñ","‡§ñ‡§∞‡§ó‡•ã‡§∂","üêá"],["‡§ó","‡§ó‡§æ‡§Ø","üêÑ"],["‡§ò","‡§ò‡•ã‡§°‡§º‡§æ","üêé"],["‡§ö","‡§ö‡§ø‡§°‡§º‡§ø‡§Ø‡§æ","üê¶"],["‡§õ","‡§õ‡§§‡§∞‡•Ä","‚òÇÔ∏è"],["‡§ú","‡§ú‡§π‡§æ‡§ú‡§º","üö¢"],["‡§ù","‡§ù‡§£‡•ç‡§°‡§æ","‚õ≥"],["‡§ü","‡§ü‡§Æ‡§æ‡§ü‡§∞","üçÖ"],["‡§†","‡§†‡§π‡§æ‡§ï‡§æ","üòÇ"],["‡§°","‡§°‡•ç‡§∞‡§Æ","ü•Å"],["‡§¢","‡§¢‡•ã‡§≤","ü™ò"],["‡§§","‡§§‡§ø‡§§‡§≤‡•Ä","ü¶ã"],["‡§•","‡§•‡§æ‡§≤‡•Ä","üçΩÔ∏è"],["‡§¶","‡§¶‡§µ‡§æ","üíä"],["‡§ß","‡§ß‡§®‡•Å‡§∑","üèπ"],["‡§®","‡§®‡§æ‡§∞‡§ø‡§Ø‡§≤","ü••"],["‡§™","‡§™‡§§‡§Ç‡§ó","ü™Å"],["‡§´","‡§´‡§≤","üçé"],["‡§¨","‡§¨‡§ï‡§∞‡•Ä","üêê"],["‡§≠","‡§≠‡•á‡§Ç‡§°‡§º","üêë"],["‡§Æ","‡§Æ‡§õ‡§≤‡•Ä","üêü"],["‡§Ø","‡§Ø‡§æ‡§ï","ü¶¨"],["‡§∞","‡§∞‡§æ‡§ú‡§æ","ü§¥"],["‡§≤","‡§≤‡§°‡•ç‡§°‡•Ç","üç°"],["‡§µ","‡§µ‡§ø‡§Æ‡§æ‡§®","‚úàÔ∏è"],["‡§∏","‡§∏‡•Ç‡§∞‡§ú","‚òÄÔ∏è"],["‡§∑","‡§∑‡§ü‡•ç‡§ï‡•ã‡§£","üõë"],["‡§∂","‡§∂‡§Ç‡§ñ","üêö"],["‡§π","‡§π‡§æ‡§•‡•Ä","üêò"],["‡§ï‡•ç‡§∑","‡§ï‡•ç‡§∑‡§Æ‡§æ","üôè"],["‡§§‡•ç‡§∞","‡§§‡•ç‡§∞‡§ø‡§∂‡•Ç‡§≤","üî±"],["‡§ú‡•ç‡§û","‡§ú‡•ç‡§û‡§æ‡§®","üìò"]],
 swar:[["‡§Ö","‡§Ö‡§®‡§æ‡§∞","üçé"],["‡§Ü","‡§Ü‡§Æ","ü•≠"],["‡§á","‡§á‡§®‡§æ‡§Æ","üéÅ"],["‡§à","‡§à‡§ü","üß±"],["‡§â","‡§â‡§≤‡•ç‡§≤‡•Ç","ü¶â"],["‡§ä","‡§ä‡§®","üß∂"],["‡§ã","‡§ã‡§∑‡§ø","üßò"],["‡§è","‡§è‡§°‡§º‡•Ä","ü¶∂"],["‡§ê","‡§ê‡§®‡§ï","üëì"],["‡§ì","‡§ì‡§Æ‡•ç","üïâÔ∏è"],["‡§î","‡§î‡§∞‡§§","üë©"],["‡§Ö‡§Ç","‡§Ö‡§Ç‡§ó‡•Ç‡§∞","üçá"],["‡§Ö‡§É","‡§¶‡•Å‡§É‡§ñ","üò¢"]],
 matra:[["‡§æ","‡§ï‡§æ‡§∞","üöó"],["‡§ø","‡§ï‡§ø‡§∏‡§æ‡§®","üë®‚Äçüåæ"],["‡•Ä","‡§ö‡•Ä‡§Ç‡§ü‡•Ä","üêú"],["‡•Å","‡§ï‡•Å‡§§‡•ç‡§§‡§æ","üêï"],["‡•Ç","‡§ï‡•Ç‡§ï‡§∞","üç≤"],["‡•É","‡§ï‡•É‡§∑‡§ø","üèûÔ∏è"],["‡•á","‡§ï‡•á‡§ï","üç∞"],["‡•à","‡§ï‡•à‡§Ç‡§ö‡•Ä","‚úÇÔ∏è"],["‡•ã","‡§ì‡§Æ‡•ç","üïâÔ∏è"],["‡•å","‡§î‡§∞‡§§","üë©"],["‡§Ç","‡§Ö‡§Ç‡§ó‡•Ç‡§†‡•Ä","üíç"],["‡§É","‡§¶‡•Å‡§É‡§ñ","üò¢"]],
 eng:[["A","Apple","üçé"],["B","Ball","‚öΩ"],["C","Cat","üê±"],["D","Dog","üê∂"],["E","Elephant","üêò"],["F","Fish","üêü"],["G","Grapes","üçá"],["H","Hen","üêî"],["I","Ice Cream","üç¶"],["J","Jug","üè∫"],["K","Kite","ü™Å"],["L","Lion","ü¶Å"],["M","Mango","ü•≠"],["N","Nose","üëÉ"],["O","Orange","üçä"],["P","Parrot","ü¶ú"],["Q","Queen","üëë"],["R","Rabbit","üêá"],["S","Sun","‚òÄÔ∏è"],["T","Tiger","üêØ"],["U","Umbrella","‚òÇÔ∏è"],["V","Van","üöê"],["W","Watch","‚åö"],["X","Xylophone","üéº"],["Y","Yacht","üõ•Ô∏è"],["Z","Zebra","ü¶ì"]],
 num:Array.from({length:100},(_,i)=>[String(i+1),hindiNums[i+1],hindiNums[i+1]])
};

let mode="hindi",index=0;
const instruction=document.getElementById("instruction");
const objectBox=document.getElementById("objectBox");
const objectName=document.getElementById("objectName");
const letters=document.getElementById("letters");
const basket=document.getElementById("basket");

function setMode(m){mode=m;index=0;load();}
function list(){return data[mode];}

function load(){
 letters.innerHTML="";
 objectBox.innerHTML="";
 const [ans,name,obj]=list()[index];
 const voice=(mode==="matra")?matraVoice[ans]:ans;
 instruction.innerText=`‡§¨‡§æ‡§¨‡•Ç! ${voice} ‡§ï‡•ã ‡§ò‡§∞ ‡§Æ‡•á‡§Ç ‡§∞‡§ñ‡•ã`;
 speak(instruction.innerText);

 if(mode==="num"){
  const n=document.createElement("div");
  n.className="numBig";
  n.innerText=ans;
  objectBox.appendChild(n);
 }else{
  const o=document.createElement("div");
  o.className="object";
  o.innerText=obj||ans;
  objectBox.appendChild(o);
 }
 objectName.innerText=name;

 let opts=[ans];
 while(opts.length<4){
  let r=list()[Math.random()*list().length|0][0];
  if(!opts.includes(r))opts.push(r);
 }
 opts.sort(()=>Math.random()-.5);

 opts.forEach(v=>{
  const c=document.createElement("div");
  c.className="card"+(mode==="num"?" numCard":"");
  if(mode==="num")c.style.setProperty("--h",Math.random()*360);
  c.innerText=v;
  drag(c,v,ans);
  letters.appendChild(c);
 });
}

function drag(el,val,correct){
 let sx,sy,ox,oy;
 el.onpointerdown=e=>{
  el.setPointerCapture(e.pointerId);
  sx=e.clientX;sy=e.clientY;
  const r=el.getBoundingClientRect();
  ox=r.left;oy=r.top;
 };
 el.onpointermove=e=>{
  if(!el.hasPointerCapture(e.pointerId))return;
  el.style.position="fixed";
  el.style.left=ox+(e.clientX-sx)+"px";
  el.style.top=oy+(e.clientY-sy)+"px";
 };
 el.onpointerup=e=>{
  el.releasePointerCapture(e.pointerId);
  const b = basket.getBoundingClientRect();
const r = el.getBoundingClientRect();

/* ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ï‡§æ center point */
const cx = r.left + r.width/2;
const cy = r.top + r.height/2;

/* ‡§ò‡§∞ ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§π‡•à ‡§Ø‡§æ ‡§®‡§π‡•Ä‡§Ç */
if(
  cx > b.left &&
  cx < b.right &&
  cy > b.top &&
  cy < b.bottom
){
   if(val===correct){speak(val);index++;load();}
   else speak("‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•ã");
  }
  el.style.position="relative";el.style.left=0;el.style.top=0;
 };
}

/* LICENSE */
const TRIAL_MS=5*60*1000, PLAN_DAYS=365;
function unlock(){licenseScreen.style.display="none";game.style.display="flex";load();}
function lock(){
 game.style.display="none";licenseScreen.style.display="flex";
 const c="C-"+Date.now();localStorage.setItem("CHALLENGE",c);
 challengeBox.innerText="Activation ID:\n"+c;
}
const _x = ["x9@K!2#L$7"];

function makeCode(ch){
 let t = ch
   .split("")
   .reverse()
   .join("") + _x[0];

 let n = 0;

 for(let i=0;i<t.length;i++){
  n = (n << 5) - n + t.charCodeAt(i);
  n |= 0; // bitwise force
 }

 const d = new Date();
 n = Math.abs(
   n +
   d.getDate() * 97 +
   (d.getMonth() + 1) * 13
 );

 return (
   String.fromCharCode(65 + (n % 26)) +
   (n % 9) +
   String.fromCharCode(90 - (n % 26)) +
   (1000 + (n % 9000))
 );
}
function activate(){
 if(licenseInput.value===makeCode(localStorage.getItem("CHALLENGE"))){
  localStorage.setItem("PLAN_EXPIRY",Date.now()+PLAN_DAYS*86400000);
  unlock();
 }else msg.innerText="‚ùå ‡§ó‡§≤‡§§ ‡§ï‡•ã‡§°";
}

const now=Date.now();
const planExp=+localStorage.getItem("PLAN_EXPIRY");
let trialStart=+localStorage.getItem("TRIAL_START");

if(planExp && now<planExp){
 unlock();
}else{
 if(!trialStart){trialStart=now;localStorage.setItem("TRIAL_START",trialStart);}
 const remain=TRIAL_MS-(now-trialStart);
 if(remain>0){unlock();setTimeout(lock,remain);}
 else lock();
}

setInterval(()=>{
 if(planExp && Date.now()<planExp)
  planInfo.innerText=Math.ceil((planExp-Date.now())/86400000)+"D";
 else planInfo.innerText="Trial";
},1000);
</script>
<script>
if ("serviceWorker" in navigator) {
  let newWorker;

  navigator.serviceWorker.register("service-worker.js");

  navigator.serviceWorker.addEventListener("controllerchange", () => {
    window.location.reload();
  });

  navigator.serviceWorker.getRegistration().then(reg => {
    if (!reg) return;

    if (reg.waiting) showUpdate(reg.waiting);

    reg.addEventListener("updatefound", () => {
      newWorker = reg.installing;
      newWorker.addEventListener("statechange", () => {
        if (newWorker.state === "installed" && navigator.serviceWorker.controller) {
          showUpdate(newWorker);
        }
      });
    });
  });

  function showUpdate(worker) {
    const bar = document.createElement("div");
    bar.style.cssText = `
      position:fixed;bottom:10px;left:10px;right:10px;
      background:#4caf50;color:#fff;padding:12px;
      border-radius:10px;font-size:16px;
      display:flex;justify-content:space-between;
      align-items:center;z-index:9999;
    `;
    bar.innerHTML = `
      üîÑ ‡§®‡§Ø‡§æ ‡§Ö‡§™‡§°‡•á‡§ü ‡§Ü‡§Ø‡§æ ‡§π‡•à
      <button style="padding:6px 12px;border:none;border-radius:6px">
        Refresh
      </button>
    `;
    bar.querySelector("button").onclick = () => {
      worker.postMessage("SKIP_WAITING");
    };
    document.body.appendChild(bar);
  }
}
</script>
</body>
</html>